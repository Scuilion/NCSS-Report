<html>
   <head>
      <title>NCSS Report</title>
      <meta charset="utf-8" />
      <script type="text/javascript" language="javascript" src="DataTables-1.9.3/media/js/jquery.js"></script>
      <script type="text/javascript" language="javascript" src="filtering.js"></script>
      <script type="text/javascript" language="javascript" src="DataTables-1.9.3/media/js/jquery.dataTables.js"></script>
      <style type="text/css" title="currentStyle">
         @import "NCSS_Report.css";
         @import "DataTables-1.9.3/media/css/jquery.dataTables.css";
      </style>
      <script>
         var getNode = function(element, elementName){
            return element.find(elementName).text();
         };
         var reDrawTable = function(aaData){
            $('#report').dataTable().fnAddData(aaData);
         };
         var initializeTable = function(){
            var oTable = $('#report').dataTable(
                  {  "aaData":[],
                     "aoColumns":[{"sTitle":"Name", "sClass":"header Name","sType":"string", "sWidth":"70%"},
                                    {"sTitle":"<div>NCSS<div id='icon'></div>", "sClass":"header NCSS","sType":"numeric","sWidth":"10%" },
                                    {"sTitle":"<span>CCN</span><div id='icon'>", "sClass":"header CCN","sType":"numeric","sWidth":"10%"},
                                    {"sTitle":"<span>JavaDoc</span>s<div id='icon'>", "sClass":"header JavaDocs","sType":"numeric","sWidth":"10%"},
                                 ], 
                     "bAutoWidth":true,
                     "bRetrieve" : true,
                     "bProcessing": true }
                  );

            /* Add event listeners to the two range filtering inputs */
           $('#min').keyup( function() { oTable.fnDraw(); } );
           $('#max').keyup( function() { oTable.fnDraw(); } );
           addFiltering();
        };
         $(document).ready(function(){
              initializeTable();
                        $.ajax({
              type: "GET",
              url: "act-ncss.xml",
              dataType: "xml",
              success: function(xml) {
                  var aaDataProper=[]
                  var allFunctions = $(xml).find('functions');
                  allFunctions.find('function').each(function(){
                     var row=[];
                     row.push(getNode($(this), 'name'));
                     row.push(getNode($(this), 'ncss'));
                     row.push(getNode($(this), 'ccn'));
                     row.push(getNode($(this), 'javadocs'));
                     aaDataProper.push(row);
                  });
                  reDrawTable(aaDataProper);
              }
            });
         });
         
      </script>
   </head>
<body>
   <input name="min" id="min" type="text"><br>
   <input name="max" id="max" type="text"><br>
   <table id="report" cellpadding="5" cellspacing="1" border="1" style="width:80% table-layout:fixed;"></table>

</body>
</html>
